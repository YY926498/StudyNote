# fork函数

由fork创建的新进程称为子进程，fork函数被调用一次，但返回两次，两次返回的区别是子进程的返回值是0，而父进程的返回值则是新建子进程的进程ID。

- 将子进程ID返回给父进程的理由是：因为一个进程的子进程可以有多个，并且没有一个函数使一个进程可以获得其所有子进程的进程ID。
- fork使子进程得到返回值0的理由是：一个进程只会有一个父进程，所以子进程总是可以调用getppid以获得其父进程的进程ID（进程ID0总是由内核交换进程使用，所以一个子进程的进程ID不可能为0）。

注：调用fork函数后，子进程会复制父进程的所有数据，此时如果父进程缓冲区有数据时，会将缓冲区的数据也一并复制。如下

~~~c++
for(int i=0;i<2;++i)
    printf("hello");
~~~

此时父进程会有2个子进程，第一个子进程会有1个子进程。

父进程输出2次hello，第一个子进程会输出2次hello，第二个子进程会复制父进程的1次hello，然后自己输出1次hello，孙子进程会复制1次第一个子进程的1次hello，然后自己输出1次hello，共计8次。