# C++内存对齐

首先可以使用预处理指令`#pragma pack(n)`设定以n字节对齐方式。其中n必须为1 2 4…这种情况

在默认情况下的对齐：

每种类型的变量的起始地址必须是对该类型的字节大小取余为0。

~~~c++
class B
{
public:
	short s;
	double d;
	int i;
	char c;	
	
};
~~~

其中各类型的变量的首地址：

~~~c++
short	:16710628
int		:16710644
char	:16710648
double	:16710636
~~~

由于`short`的字节大小为2，因此起始地址是对2取余为0的地址：`16710628`

`int`的字节大小为4，因此起始地址是对4取余为0的地址：`16710644`

`char`的字节大小为1，因此可以紧接`int`类型的字节地址：`16710648`

`double`的字节大小为8，因此起始地址必须对8取余为0的地址：`16710636`

其中有不足的进行对齐。

如果使用预处理指令`#pragma pack(n)`，那么对齐的大小为`min(n,sizeof(type))`，取两者的最小值。