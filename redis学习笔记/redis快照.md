# redis快照

配置选项：

~~~c
save 60 1000
stop-writes-on-bgsave-error no
rdbcompression yes
dbfilename dump.rdb
dir ./
~~~

将存在于某一时刻的所有数据都写入到硬盘中。

根据配置，快照将被写入到dbfilename选项指定的文件里面，并储存在dir选项指定的路径上面。但是如果在新的快照文件创建完毕之前，Redis、系统或硬件这三者任意一个发生崩溃，那么redis将丢失最近一次创建快照之后写入的所有数据。

例如：假设redis目前在内存里面存储有10G数据，上一个快照是在下午2:34创建的，并且创建成功。下午3:06时，redis又开始创建新的快照，并且在3:08快照文件创建完毕之前，有35个键进行了更新。如果在下午3:06至下午3:08期间，系统发生崩溃，导致redis无法完成新快照的创建工作，那么redis将丢失下午2:34之后写入的所有数据。如果系统恰好在新的快照文件创建完毕之后崩溃，那么redis将只丢失35个键的更新数据。