# 同步、非同步 阻塞和非阻塞

同步和非同步指的是访问数据的方式。

同步需要主动读写数据。在发起一个调用后，没有得到结果之前不返回。

异步只需要I/O操作完成的通知，并不主动读写数据，由操作系统内核完成数据的读写。发起调用后立刻返回，然后可以查询状态或者回调函数的形式，得知是否完成相应的操作。

阻塞和非阻塞表示系统状态。

阻塞：比如读写socket时，线程需要等待调用完成，此时阻塞在这个调用上，表示阻塞。

非阻塞：比如在读套接字的时候，如果缓冲区没有数据，就立刻返回，但是如果缓冲区有数据，需要等待内核将缓冲区的数据拷贝到指定内存区域。

阻塞和非阻塞主要区别是进程/线程要访问的数据是否就绪，进程/线程是否需要等待。

因此无论是阻塞还是非阻塞，都会得到一个结果。因此阻塞和非阻塞都是同步。

I/O分为阻塞、非阻塞、I/O多路复用、信号驱动和异步五种。

其中阻塞、非阻塞、I/O多路复用和信号驱动都是同步方式。

操作系统的异步一般指Linux系统下的aio和windows下的IOCP。

从框架层面上讲，可以同上述几种I/O都做成“异步”。

比如：创建一个线程，应用将I/O和对应的回调函数注册到框架中。框架可以通过I/O多路复用查询是否有数据到来。有数据到来后，执行对应的回调函数。应用不断查询。

这样有后台线程执行数据读写和回调函数，应用只需要查询是否完成，类似于aio。