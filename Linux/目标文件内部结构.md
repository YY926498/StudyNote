# 目标文件内部结构

一般可执行文件的内部结构如下：

- File Header：描述整个文件的文件属性，包括文件是否可执行、是静态链接还是动态链接及入口地址（如果是可执行文件）、目标硬件、目标操作系统等信息，文件头还包括一个段表，段表是一个描述文件中各个段的数组。段表描述了文件中各个段在文件中的偏移位置及段的属性等，从段表里面可以得到每个段的所有信息。
- .text section：程序源代码编译后的机器指令存放的位置
- .data section：已初始化的全局变量和局部静态变量存放的位置
- .bss section：未初始化的全局变量和局部静态变量存放的位置。此时，这些变量虽然可以放在.data段，但是都为0，没有必要。.bss段必须记录所有未初始化的全局变量和局部静态变量的大小总和。**因此，.bss段只是为未初始化的全局变量和局部静态变量预留位置**，它没有内容，所以在文件中不占据空间。



.bss段为未初始化的全局变量和局部静态变量预留空间。但是有些编译器不会将未初始化的全局变量存放在.bss段，只是预留一个未定义的全局符号。**不过编译单元内部可见的静态变量是存放在.bss段**。

---

```c++
static int x1=0;
static int x2=1;
```

其中x1=0，可以认为是未初始化的，有可能被优化，放在.bss段。而x2=1放在.data段。

